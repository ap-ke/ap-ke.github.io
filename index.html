<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Nutrition Tracker</title>

<style>
body {
    font-family: sans-serif;
    display: flex;
    justify-content: center;
    padding: 50px;
    background: #f4f4f9;
}
.card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
}
textarea {
    width: 100%;
    height: 80px;
    margin: 10px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    padding: 10px;
    box-sizing: border-box;
}
button {
    width: 100%;
    padding: 10px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
.results {
    margin-top: 20px;
    border-top: 1px solid #eee;
    padding-top: 20px;
}
.stat {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}
</style>
</head>

<body>

<div class="card">
    <h2>üçé What did you eat?</h2>
    <p>Example: "3 large eggs and a bowl of oatmeal"</p>

    <textarea id="foodInput" placeholder="Type your meal here..."></textarea>
    <button onclick="analyzeFood()">Calculate Macros</button>

    <div id="results" class="results" style="display:none;">
        <h3>Nutrition Breakdown (AI Estimate)</h3>
        <div class="stat"><span>Calories:</span> <strong id="cal">0</strong></div>
        <div class="stat"><span>Protein:</span> <strong id="pro">0g</strong></div>
        <div class="stat"><span>Carbs:</span> <strong id="carb">0g</strong></div>
        <div class="stat"><span>Fats:</span> <strong id="fat">0g</strong></div>
    </div>
</div>

<script>
const GROQ_API_KEY = "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";

async function analyzeFood() {
    const food = document.getElementById("foodInput").value.trim();
    if (!food) return;

    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
        method: "POST",
        headers: {
            "Authorization": "Bearer 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",
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            model: "llama3-70b-8192",
            temperature: 0,
            messages: [
                {
                    role: "system",
                    content: "You are a nutrition expert. Return ONLY valid JSON."
                },
                {
                    role: "user",
                    content: `
Estimate the total nutrition for this meal:

"${food}"

Return JSON exactly in this format:
{
  "calories": number,
  "protein": number,
  "carbs": number,
  "fat": number
}
`
                }
            ]
        })
    });

    const data = await response.json();
    const result = JSON.parse(data.choices[0].message.content);

    document.getElementById("results").style.display = "block";
    document.getElementById("cal").innerText = Math.round(result.calories);
    document.getElementById("pro").innerText = Math.round(result.protein) + "g";
    document.getElementById("carb").innerText = Math.round(result.carbs) + "g";
    document.getElementById("fat").innerText = Math.round(result.fat) + "g";
}
</script>

</body>
</html>

</body>
</html>
